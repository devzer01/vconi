static const unsigned short b8e_beng_wc[128] = {
        0xA680, 0xA681, 0xA682, 0xA683, 0xA684, 0xA685, 0xA686, 0xA687, 0xA688, 0xA689, 0xA68A, 0xA68B, 0xA68C, 0xA68D,
        0xA68E, 0xA68F, 0xA690, 0xA691, 0xA692, 0xA693, 0xA694, 0xA695, 0xA696, 0xA697, 0xA698, 0xA699, 0xA69A, 0xA69B,
        0xA69C, 0xA69D, 0xA69E, 0xA69F, 0xA6A0, 0xA6A1, 0xA6A2, 0xA6A3, 0xA6A4, 0xA6A5, 0xA6A6, 0xA6A7, 0xA6A8, 0xA6A9,
        0xA6AA, 0xA6AB, 0xA6AC, 0xA6AD, 0xA6AE, 0xA6AF, 0xA6B0, 0xA6B1, 0xA6B2, 0xA6B3, 0xA6B4, 0xA6B5, 0xA6B6, 0xA6B7,
        0xA6B8, 0xA6B9, 0xA6BA, 0xA6BB, 0xA6BC, 0xA6BD, 0xA6BE, 0xA6BF, 0xA780, 0xA781, 0xA782, 0xA783, 0xA784, 0xA785,
        0xA786, 0xA787, 0xA788, 0xA789, 0xA78A, 0xA78B, 0xA78C, 0xA78D, 0xA78E, 0xA78F, 0xA790, 0xA791, 0xA792, 0xA793,
        0xA794, 0xA795, 0xA796, 0xA797, 0xA798, 0xA799, 0xA79A, 0xA79B, 0xA79C, 0xA79D, 0xA79E, 0xA79F, 0xA7A0, 0xA7A1,
        0xA7A2, 0xA7A3, 0xA7A4, 0xA7A5, 0xA7A6, 0xA7A7, 0xA7A8, 0xA7A9, 0xA7AA, 0xA7AB, 0xA7AC, 0xA7AD, 0xA7AE, 0xA7AF,
        0xA7B0, 0xA7B1, 0xA7B2, 0xA7B3, 0xA7B4, 0xA7B5, 0xA7B6, 0xA7B7, 0xA7B8, 0xA7B9, 0xA7BA, 0xA7BB, 0xA7BC, 0xA7BD,
        0xA7BE, 0xA7BF
};

static const unsigned char b8e_beng_b[128] = {
        0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x88, 0x82, 0x8a, 0x83, 0x8b, 0x84, 0x85, 0x00, 0x00, 0x86, 0x8e, 0x00,
        0x00, 0x87, 0x8f, 0xb0, 0xc0, 0xb1, 0xc1, 0xbd, 0xb2, 0xc2, 0xb3, 0xc3, 0xcd, 0xb4, 0xc4, 0xb5, 0xc5, 0x00,
        0xb7, 0xc7, 0xb8, 0xc8, 0xb6, 0x00, 0xb9, 0xc9, 0xba, 0xca, 0xe2, 0xbf, 0xbe, 0x00, 0xbb, 0x00, 0x00, 0x00,
        0xcc, 0xdc, 0xbc, 0xe1, 0x00, 0x00, 0x98, 0x92, 0x9a, 0x93, 0x9b, 0x94, 0x9c, 0x00, 0x00, 0x96, 0x9e, 0x00,
        0x00, 0x97, 0x9f, 0xb7, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xde,
        0xce, 0x00, 0xdf, 0x8c, 0x8d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0xbe, 0xbe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};


static int
b8ebeng_mbtowc(conv_t conv, ucs4_t *pwc, const unsigned char *s, size_t n) {
    unsigned char c = *s;
    if (c < 0x80) {
        *pwc = (ucs4_t) c;
        return 1;
    } else {
        unsigned short wc = b8e_beng_wc[c - 0x80];
        *pwc = (ucs4_t) wc;
        return 1;
    }
    return RET_ILSEQ;
}

static int
b8ebeng_wctomb(conv_t conv, unsigned char *r, ucs4_t wc, size_t n) {
    if (wc < 0x0080) {
        *r = wc;
        return 1;
    } else if (wc >= (ucs4_t) 0x0980 && wc <= (ucs4_t) 0x09ff) {
        int index = wc - (ucs4_t) 0x0980;
        *r = (char) b8e_beng_b[index];
        return 1;
    } else if (wc == 0xFFFD) {
        *r = 0xff;
        return 1;
    }
    return RET_ILUNI;
}

