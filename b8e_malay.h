static const unsigned short b8e_malay_wc[128] = {
        0xb485, 0x0000, 0xb487, 0xb489, 0xb48b, 0xb48c, 0xb48e, 0xb492, 0xb486, 0x0000, 0xb488, 0xb48a, 0xb5a0, 0xb5a1,
        0xb490, 0xb494, 0x0000, 0x0000, 0xb4bf, 0xb581, 0xb583, 0xb5a2, 0xb586, 0xb58a, 0xb4be, 0x0000, 0xb580, 0xb582,
        0xb584, 0xb5a3, 0xb588, 0xb58c, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xb48f, 0xb493, 0x0000, 0x0000,
        0x0000, 0x0000, 0x0000, 0x0000, 0xb587, 0xb58b, 0xb495, 0xb497, 0xb49a, 0xb49c, 0xb49f, 0xb4a1, 0xb4a8, 0xb4a4,
        0xb4a6, 0xb4aa, 0xb4ac, 0xb4b2, 0xb4b8, 0xb499, 0xb4b0, 0xb4af, 0xb496, 0xb498, 0xb49b, 0xb49d, 0xb4a0, 0xb4a2,
        0x0000, 0xb4a5, 0xb4a7, 0xb4ab, 0xb4ad, 0xb4b3, 0xb4b6, 0xb49e, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
        0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0xb4b7, 0x0000, 0xb4b1, 0x0000, 0xb4b5, 0xb4b9,
        0xb4ae, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
        0xb481, 0xb480, 0xb483, 0x0000, 0x0000, 0xb4bb, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
        0x0000, 0x0000
};

static const unsigned char b8e_malay_b[128] = {
        0xf1, 0xf0, 0xf1, 0xf2, 0x00, 0x80, 0x88, 0x82, 0x8a, 0x83, 0x8b, 0x84, 0x85, 0x00, 0x86, 0xa6, 0x8e, 0x00,
        0x87, 0xa7, 0x8f, 0xb0, 0xc0, 0xb1, 0xc1, 0xbd, 0xb2, 0xc2, 0xb3, 0xc3, 0xcd, 0xb4, 0xc4, 0xb5, 0xc5, 0x00,
        0xb7, 0xc7, 0xb8, 0xc8, 0xb6, 0x00, 0xb9, 0xc9, 0xba, 0xca, 0xe2, 0xbf, 0xbe, 0xde, 0xbb, 0xcb, 0x00, 0xe0,
        0xcc, 0xdc, 0xbc, 0xe1, 0x00, 0xf5, 0xf5, 0x00, 0x98, 0x92, 0x9a, 0x93, 0x9b, 0x94, 0x9c, 0x00, 0x96, 0xae,
        0x9e, 0x00, 0x97, 0xaf, 0x9f, 0xf5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe2, 0xbf, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x8a, 0x8c, 0x8d, 0x95, 0x9d, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb6, 0x8c, 0xbb,
        0xcb, 0xc0,
};


static int
b8emalay_mbtowc(conv_t conv, ucs4_t *pwc, const unsigned char *s, size_t n) {
    unsigned char c = *s;
    if (c < 0x80) {
        *pwc = (ucs4_t) c;
        return 1;
    } else {
        unsigned short wc = b8e_malay_wc[c - 0x80];
        *pwc = (ucs4_t) wc;
        return 1;
    }
    return RET_ILSEQ;
}

static int
b8emalay_wctomb(conv_t conv, unsigned char *r, ucs4_t wc, size_t n) {
    if (wc < 0x0080) {
        *r = wc;
        return 1;
    } else if (wc >= 0xf0918080 && wc <= 0xf09181bf) {
        *r = b8e_malay_b[wc - 0xf0918080];
        return 1;
    }
    return RET_ILUNI;
}